(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,function(e,t,n){e.exports={settings_container:"settings_settings_container__Qe-Sa",slider:"settings_slider__1alb2",slider_green:"settings_slider_green__1TvLw",thumb:"settings_thumb__2rH5f",thumb_green:"settings_thumb_green__1u70X",label_text:"settings_label_text__mKARp",back_button_container:"settings_back_button_container__5vI7L"}},function(e,t,n){e.exports={button:"RequestNotificationButton_button__2CdGW",button_default:"RequestNotificationButton_button_default__2GevG",button_enabled:"RequestNotificationButton_button_enabled__1hcv5",button_denied:"RequestNotificationButton_button_denied__20Xgy"}},function(e,t,n){e.exports={timer_container:"timer_timer_container__V9v2g",button_container:"timer_button_container__Wb7RO",settings_button_container:"timer_settings_button_container__1BFA-"}},function(e,t,n){e.exports={settings_button:"settings-button_settings_button__3y5a5",icon:"settings-button_icon__FC8AJ",text:"settings-button_text__3yd2D"}},function(e,t,n){e.exports={back_button:"back-button_back_button__2BDj6",icon:"back-button_icon__3SKiG",text:"back-button_text__v8uv8"}},,function(e,t,n){e.exports={cells:"style_cells__2e3lp",cell:"style_cell__29Ipw"}},,,,function(e,t,n){e.exports={main:"app_main__3yfFw"}},function(e,t,n){e.exports={play_button:"play-button_play_button__2lL0Q",pulse:"play-button_pulse__qAuxs"}},function(e,t,n){e.exports={pause_button:"pause-button_pause_button__1m1Cl",pulse:"pause-button_pulse__1mZHC"}},function(e,t,n){e.exports=n(29)},,,,,,,,,function(e,t,n){},,,,,,function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(10),s=n.n(o),c=(n(23),n(11)),l=n.n(c),i=n(6),u=(n(24),n(12)),m=n.n(u);var _=e=>{let{onClick:t,className:n}=e;return r.a.createElement("button",{className:"".concat(m.a.play_button," ").concat(n),onClick:t},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-6 h-6"},r.a.createElement("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"})))},b=n(3),d=n.n(b),g=n(13),k=n.n(g);var w=e=>{let{onClick:t,className:n}=e;return r.a.createElement("button",{className:"".concat(k.a.pause_button," ").concat(n),onClick:t},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"w-6 h-6"},r.a.createElement("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 5.25v13.5m-7.5-13.5v13.5"})))},f=n(4),v=n.n(f);var p=e=>r.a.createElement("button",Object.assign({className:v.a.settings_button},e),r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:v.a.icon},r.a.createElement("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12a7.5 7.5 0 0 0 15 0m-15 0a7.5 7.5 0 1 1 15 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077 1.41-.513m14.095-5.13 1.41-.513M5.106 17.785l1.15-.964m11.49-9.642 1.149-.964M7.501 19.795l.75-1.3m7.5-12.99.75-1.3m-6.063 16.658.26-1.477m2.605-14.772.26-1.477m0 17.726-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205 12 12m6.894 5.785-1.149-.964M6.256 7.178l-1.15-.964m15.352 8.864-1.41-.513M4.954 9.435l-1.41-.514M12.002 12l-3.75 6.495"})),r.a.createElement("p",{className:v.a.text},"Settings"));var E=r.a.createContext({workMinutes:45,breakMinutes:5,setWorkMinutes:()=>{},setBreakMinutes:()=>{},showSettings:!1,setShowSettings:()=>{}}),h=n(7),N=n.n(h);var C=r.a.memo(e=>{let{sessions:t}=e;const n=e=>e<t.length?"work"===t[e]?"#ed4141":"#40c463":"rgba(255,255,255,.2)",a=Array.from({length:48},(e,t)=>r.a.createElement("div",{className:N.a.cell,key:t,style:{backgroundColor:n(t)}}));return r.a.createElement("div",{className:N.a.cells},a)});var M=function(){const{showSettings:e,setShowSettings:t,workMinutes:n,breakMinutes:o}=Object(a.useContext)(E),[s,c]=Object(a.useState)(!0),[l,u]=Object(a.useState)(0),[m,b]=Object(a.useState)("work"),[g,k]=Object(a.useState)(()=>{const e=localStorage.getItem("pomodoroSessions");if(e){const t=JSON.parse(e);if((e=>{const t=new Date;return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()})(new Date(t.date)))return t.sessions}return[]}),f=Object(a.useRef)(null),v=Object(a.useRef)(0),h=Object(a.useRef)(new Audio("/pomodoro-timer/alarm.mp3")),N=(Object(a.useRef)(l),Object(a.useRef)(s)),M=Object(a.useRef)(m),x=Object(a.useCallback)(()=>{const e={date:new Date,sessions:g};localStorage.setItem("pomodoroSessions",JSON.stringify(e))},[g]),j=Object(a.useCallback)((e,t)=>{if(navigator.serviceWorker.controller){const n=Date.now()+1e3*e;navigator.serviceWorker.controller.postMessage({type:"SET_TIMER",endTime:n,mode:t})}},[]),O=Object(a.useCallback)(()=>{const e=60*("work"===M.current?n:o);v.current=e,u(e),c(!0),N.current=!0,f.current=null},[n,o]),S=Object(a.useCallback)(()=>{const e=M.current;k(t=>[...t,e]);const t="work"===e?"break":"work";b(t),M.current=t,O()},[O]),y=Object(a.useCallback)(()=>{"Notification"in window&&"granted"===Notification.permission&&new Notification("work"===M.current?"Work Session Ended":"Break Time Over",{body:"work"===M.current?"Time's up! Take a break. \u23f0":"Break's over! Time to focus. \ud83d\udcbb",icon:"/tomato.png"})},[]),B=Object(a.useCallback)(()=>{if(N.current)return;null===f.current&&(f.current=Date.now());const e=Date.now(),t=Math.floor((e-f.current)/1e3),n=Math.max(v.current-t,0);u(n),0===n&&(h.current.play(),y(),S())},[y,S]);Object(a.useEffect)(()=>{N.current&&O()},[n,o,O]),Object(a.useEffect)(()=>{M.current=m},[m]),Object(a.useEffect)(()=>{O();const e=setInterval(()=>{B()},1e3);return()=>clearInterval(e)},[O,B]),Object(a.useEffect)(()=>{x()},[g,x]),Object(a.useEffect)(()=>{const e=setInterval(()=>{const e=new Date;0===e.getHours()&&0===e.getMinutes()&&(k([]),x())},6e4);return()=>clearInterval(e)},[x]);const R="work"===M.current?60*n:60*o,D=Math.round(l/R*100),W=Math.floor(l/60);let I=l%60;const T=I<10?"0".concat(I):I;return r.a.createElement("div",{className:d.a.timer_container},r.a.createElement(i.a,{value:D,text:"".concat(W,":").concat(T),styles:Object(i.b)({textColor:"#fff",pathColor:"work"===M.current?"#ed4141":"#40c463",trailColor:"rgba(255,255,255,.2)"})}),r.a.createElement("div",{className:d.a.button_container},s?r.a.createElement(_,{onClick:function(){c(!1),N.current=!1,f.current=Date.now(),j(v.current,M.current)}}):r.a.createElement(w,{onClick:function(){if(c(!0),N.current=!0,null!==f.current){const e=Math.floor((Date.now()-f.current)/1e3);v.current=Math.max(v.current-e,0),f.current=null}navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"CANCEL_TIMER"})}})),r.a.createElement(C,{sessions:g}),r.a.createElement("div",{className:d.a.settings_button_container},r.a.createElement(p,{onClick:()=>t(!0)})))},x=n(1),j=n.n(x),O=n(8),S=n.n(O),y=n(5),B=n.n(y);var R=e=>r.a.createElement("button",Object.assign({className:B.a.back_button},e),r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:B.a.icon},r.a.createElement("path",{fillRule:"evenodd",d:"M7.793 2.232a.75.75 0 0 1-.025 1.06L3.622 7.25h10.003a5.375 5.375 0 0 1 0 10.75H10.75a.75.75 0 0 1 0-1.5h2.875a3.875 3.875 0 0 0 0-7.75H3.622l4.146 3.957a.75.75 0 0 1-1.036 1.085l-5.5-5.25a.75.75 0 0 1 0-1.085l5.5-5.25a.75.75 0 0 1 1.06.025Z",clipRule:"evenodd"})),r.a.createElement("p",{className:B.a.text},"back")),D=n(2),W=n.n(D);var I=()=>{const[e,t]=Object(a.useState)("default");Object(a.useEffect)(()=>{"Notification"in window&&t(Notification.permission)},[]);return r.a.createElement("button",{onClick:async()=>{if("Notification"in window){const e=await Notification.requestPermission();t(e)}},className:"".concat(W.a.button," ").concat((()=>{switch(e){case"granted":return W.a.button_enabled;case"denied":return W.a.button_denied;default:return W.a.button_default}})()),disabled:"denied"===e},(()=>{switch(e){case"granted":return"Notification Enabled";case"denied":return"Notification blocked";default:return"Enable Notification"}})())};var T=()=>{const{workMinutes:e,breakMinutes:t,setWorkMinutes:n,setBreakMinutes:o,showSettings:s,setShowSettings:c}=Object(a.useContext)(E);return s?r.a.createElement("div",{className:j.a.settings_container},r.a.createElement("label",{className:j.a.label_text},"work: ",e," min"),r.a.createElement(S.a,{className:j.a.slider,value:e,thumbClassName:j.a.thumb,trackClassName:j.a.track,min:1,max:60,onChange:e=>n(e)}),r.a.createElement("label",{className:j.a.label_text},"break: ",t," min"),r.a.createElement(S.a,{className:j.a.slider_green,value:t,thumbClassName:"".concat(j.a.thumb," ").concat(j.a.thumb_green),trackClassName:j.a.track,onChange:e=>o(e),min:1,max:30}),r.a.createElement("div",{className:j.a.back_button_container},r.a.createElement(I,null),r.a.createElement(R,{onClick:()=>c(!1)}))):null};var F=()=>{const[e,t]=Object(a.useState)(!1),[n,o]=Object(a.useState)(20),[s,c]=Object(a.useState)(5);return r.a.createElement("main",{className:l.a.main},r.a.createElement(E.Provider,{value:{workMinutes:n,breakMinutes:s,setWorkMinutes:o,setBreakMinutes:c,showSettings:e,setShowSettings:t}},e?r.a.createElement(T,null):r.a.createElement(M,null)))};var H=e=>{e&&e instanceof Function&&n.e(3).then(n.bind(null,30)).then(t=>{let{getCLS:n,getFID:a,getFCP:r,getLCP:o,getTTFB:s}=t;n(e),a(e),r(e),o(e),s(e)})};s.a.createRoot(document.getElementById("root")).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(F,null))),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(e=>{console.log("Service Worker registered successfully:",e.scope)}).catch(e=>{console.log("Service Worker registration failed:",e)})}),H()}],[[14,1,2]]]);
//# sourceMappingURL=main.9a81f5aa.chunk.js.map